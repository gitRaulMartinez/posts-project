<div>
    <div 
        class="
            rounded mx-auto py-1 max-w-xl border-transparent m-3
            flex justify-between items-center px-2
            max-[335px]:flex-col max-[335px]:justify-start
        "
    >
        <div>
            <a
                href="/posts" 
                class="
                    bg-gray-600 py-1 px-3 font-medium
                    text-slate-100 rounded-full
                    hover:bg-gray-600 cursor-pointer mr-2 text-center
                "
            >
                Todos
            </a>
            <a
                href="/posts/my-posts"
                class="
                    bg-gray-400 py-1 px-3 font-medium
                    text-slate-100 rounded-full
                    hover:bg-gray-600 cursor-pointer text-center
                "
            >
                Mis posts
            </a>
        </div>
        <div class="max-[335px]:mt-1">
            <form action=""></form>
            <a
                href="/posts/new"
                class="
                    flex justify-between items-center text-slate-100 text-sm rounded-full 
                    bg-slate-800 py-1 px-3 font-medium
                    hover:bg-slate-900
                    focus:ring-2 focus:ring-offset-2 focus:ring-slate-900
                    dark:hover:bg-slate-600
                "
            >
                <p>Nuevo post</p>
                <i class="fa-solid fa-plus ml-3 text-sm"></i>
            </a>
        </div>
    </div>
    <div>
        {{#each posts}}
            <div 
                class="
                    bg-white mx-auto ring-1 ring-black ring-opacity-5 shadow-md rounded-md p-3 max-w-xl border-transparent m-3
                    hover:bg-slate-100 cursor-pointer
                    max-sm:rounded-none max-sm:max-w-screen-sm max-sm:p-0
                    dark:bg-slate-800
                "
            >
                <div class="flex justify-between items-end max-sm:px-2 max-sm:pt-2">
                    <div class="text-md font-bold min-w-md overflow-hidden mr-2 truncate">
                        <strong class="text-slate-700 dark:text-slate-200">{{this.title}}</strong>
                    </div>
                    <div class="flex justify-end flex-none">
                        <div class="mr-2">
                            <p class="text-sm font-bold text-slate-700 text-end dark:text-slate-100">
                                {{#if this.user.me}}
                                    (Yo)
                                {{/if}}{{this.user.name}}
                            </p>
                            <p class="text-sm text-slate-500 text-end">
                                {{this.user.last}}
                            </p>
                        </div>
                        <div class="flex-none">
                            {{#if this.user.urlCat}}
                                <img src="{{this.user.url}}" alt="Imagen de perfil" class="bg-white h-10 w-10 object-cover rounded-full shadow-md overflow-hidden">
                            {{else}}
                                <img src="/images/profile/{{this.user.url}}" alt="Imagen de perfil" class="bg-white h-10 w-10 object-cover rounded-full shadow-md overflow-hidden">
                            {{/if}}
                        </div>
                    </div>
                </div>
                <div class="max-h-96 my-3 max-sm:px-2 max-sm:pt-2">
                    <p class="text-sm text-slate-600 dark:text-slate-100">
                        {{this.body}}
                    </p>
                </div>
                {{#if this.image}}
                    <div class="mx-auto max-sm:pt-2">
                        <img src="/images/posts/{{this.image}}" alt="Imagen de post" class="object-contain max-h-96 mx-auto">
                    </div>
                {{/if}}
                <div class="flex justify-between items-center mt-2 max-sm:px-2 max-sm:pb-2">
                    <div class="flex">
                        <button
                            type="button"
                            data-id="{{this.user._id}}"
                            data-name="{{this.user.name}}"
                            class="
                                btn-follow
                                flex justify-between items-center text-slate-100 text-sm rounded-full 
                                bg-slate-800 py-1 px-3 font-medium
                                hover:bg-slate-900 mr-2
                                focus:ring-2 focus:ring-offset-2 focus:ring-slate-900
                                dark:bg-slate-100 dark:text-slate-900 dark:focus:ring-slate-100
                            "
                        >   
                            {{#if this.follow}}
                                <span>Siguiendo</span> 
                                <i class="fa-solid fa-circle-check ml-2"></i>
                            {{else}}
                                <span>Seguir</span> 
                                <i class="fa-solid fa-circle-chevron-right ml-2"></i>
                            {{/if}}
                        </button>
                    </div>
                    <div class="flex">
                        <a
                            href="/profile/{{this.user.profile}}"
                            class="
                                flex justify-between items-center text-slate-100 text-sm rounded-full 
                                bg-cyan-700 py-1 px-3 font-medium
                                hover:bg-cyan-900 mr-2
                                focus:ring-2 focus:ring-offset-2 focus:ring-cyan-900
                            "
                        >
                            Ver perfil
                        </a>
                        <a
                            href="/posts/{{this.slug}}"
                            class="
                                flex justify-between items-center text-slate-100 text-sm rounded-full 
                                bg-blue-600 py-1 px-3 font-medium
                                hover:bg-blue-700
                                focus:ring-2 focus:ring-offset-2 focus:ring-blue-700
                            "
                        >
                            Ver post
                        </a>
                    </div>
                </div>
            </div>
        {{/each}}
    </div>
</div>
